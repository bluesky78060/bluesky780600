<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ§ª ê³¼ìˆ˜ë†ê°€ ë†ì•½ì‚´í¬ - ìš©ìˆ˜ pH ì¡°ì ˆ ê³„ì‚°ê¸°</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans KR", sans-serif;
      line-height: 1.6;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      color: #333;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }
    
    .header {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      color: white;
      padding: 30px 40px;
      text-align: center;
    }
    
    .header h1 {
      font-size: 2.2em;
      margin-bottom: 10px;
      font-weight: 700;
    }
    
    .header .subtitle {
      font-size: 1.1em;
      opacity: 0.9;
    }
    
    .main-content {
      padding: 40px 60px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 60px;
    }
    
    @media (max-width: 768px) {
      .main-content {
        grid-template-columns: 1fr;
        gap: 30px;
        padding: 30px 20px;
      }
    }
    
    .card {
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      border: 1px solid rgba(0, 0, 0, 0.05);
    }
    
    .card h2 {
      color: #2c3e50;
      margin-bottom: 20px;
      font-size: 1.4em;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .input-section {
      grid-column: 1 / -1;
    }
    
    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 25px;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
    }
    
    .form-group label {
      font-weight: 600;
      color: #34495e;
      margin-bottom: 8px;
      font-size: 0.95em;
    }
    
    .form-group input,
    .form-group select {
      padding: 12px 15px;
      border: 2px solid #e1e8ed;
      border-radius: 10px;
      font-size: 1em;
      transition: all 0.3s ease;
      background: white;
    }
    
    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: #4facfe;
      box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
    }
    
    .form-group input::placeholder {
      color: #95a5a6;
    }
    
    .hint {
      font-size: 0.85em;
      color: #7f8c8d;
      margin-top: 5px;
    }
    
    .acid-settings {
      background: #f8f9fa;
      border-radius: 10px;
      padding: 20px;
      margin-top: 15px;
      border: 2px dashed #dee2e6;
    }
    
    .acid-settings.citric {
      background: #fff3cd;
      border-color: #ffeaa7;
    }
    
    .button-group {
      display: flex;
      gap: 15px;
      margin-top: 25px;
      flex-wrap: wrap;
    }
    
    .btn {
      padding: 12px 25px;
      border: none;
      border-radius: 10px;
      font-size: 1em;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    
    .btn-secondary {
      background: #95a5a6;
      color: white;
    }
    
    .btn-success {
      background: #27ae60;
      color: white;
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    
    .guide-section {
      background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    }
    
    .guide-item {
      background: rgba(255, 255, 255, 0.9);
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 15px;
      border-left: 4px solid #4facfe;
    }
    
    .guide-item:last-child {
      margin-bottom: 0;
    }
    
    .guide-item h4 {
      color: #2c3e50;
      margin-bottom: 8px;
      font-size: 1.1em;
    }
    
    .guide-item ul {
      list-style: none;
      padding-left: 0;
    }
    
    .guide-item li {
      color: #34495e;
      padding: 3px 0;
      position: relative;
      padding-left: 20px;
    }
    
    .guide-item li::before {
      content: "â€¢";
      color: #4facfe;
      position: absolute;
      left: 0;
      font-weight: bold;
    }
    
    .result-section {
      grid-column: 1 / -1;
      background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    }
    
    .result-display {
      background: white;
      border-radius: 10px;
      padding: 25px;
      margin: 20px 0;
      border: 2px solid #e1e8ed;
      font-family: 'Courier New', monospace;
      white-space: pre-wrap;
      min-height: 200px;
      color: #2c3e50;
      line-height: 1.8;
    }
    
    .warning-box {
      background: #fff3cd;
      border: 2px solid #ffeaa7;
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
      color: #856404;
    }
    
    .warning-box h4 {
      margin-bottom: 10px;
      color: #d63031;
    }
    
    .tips-section {
      grid-column: 1 / -1;
      background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    }
    
    .tips-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }
    
    .tip-item {
      background: rgba(255, 255, 255, 0.9);
      padding: 20px;
      border-radius: 10px;
      border-left: 4px solid #00b894;
    }
    
    .tip-item h4 {
      color: #2c3e50;
      margin-bottom: 10px;
    }
    
    .tip-item ul {
      list-style: none;
      padding-left: 0;
    }
    
    .tip-item li {
      padding: 5px 0;
      color: #34495e;
      position: relative;
      padding-left: 20px;
    }
    
    .tip-item li::before {
      content: "âœ“";
      color: #00b894;
      position: absolute;
      left: 0;
      font-weight: bold;
    }
    

  </style>
</head>
<body>
  <div class="container">
    <!-- í—¤ë” -->
    <div class="header">
      <h1>ğŸ§ª ê³¼ìˆ˜ë†ê°€ ë†ì•½ì‚´í¬ - ìš©ìˆ˜ pH ì¡°ì ˆ ê³„ì‚°ê¸°</h1>
      <p class="subtitle">ëŒ€ë¶€ë¶„ì˜ ë†ì•½ì€ ì•½ì‚°ì„±(pH 5.0~6.5)ì—ì„œ ì•ˆì •/íš¨ìœ¨ì´ ì¢‹ìŠµë‹ˆë‹¤. êµ¬ë¦¬ì œì œëŠ” ê³¼ì‚°ì„± í”¼í•˜ê³ (ì•½ì•Œì¹¼ë¦¬~ì¤‘ì„±), ê¸€ë¦¬í¬ì„¸ì´íŠ¸ëŠ” ì‚°ì„±(pH 4.5~5.5)ì—ì„œ ìœ ë¦¬í•©ë‹ˆë‹¤.</p>
    </div>

    <div class="main-content">
      <!-- ì…ë ¥ ì„¹ì…˜ -->
      <div class="card input-section">
        <h2>ğŸ“ ì…ë ¥ ì •ë³´</h2>
        
        <div class="form-grid">
          <div class="form-group">
            <label for="vol">ë¬¼ì˜ ë¶€í”¼ (L)</label>
            <input id="vol" type="number" min="0" step="0.1" value="100" placeholder="ì˜ˆ: 100" />
          </div>
          
          <div class="form-group">
            <label for="alk">ì•Œì¹¼ë¦¬ë„ (mg/L as CaCOâ‚ƒ)</label>
            <input id="alk" type="number" min="0" step="1" value="100" placeholder="ì˜ˆ: 100" />
            <div class="hint">ëª¨ë¥´ë©´ 0ìœ¼ë¡œ ì…ë ¥í•˜ì„¸ìš”</div>
          </div>
          
          <div class="form-group">
            <label for="ph0">ì´ˆê¸° pH</label>
            <input id="ph0" type="number" min="0" max="14" step="0.1" value="8.0" />
          </div>
          
          <div class="form-group">
            <label for="pht">ëª©í‘œ pH</label>
            <input id="pht" type="number" min="0" max="14" step="0.1" value="6.0" />
          </div>
        </div>

        <div class="form-group">
          <label for="acid">ì‚°ë„ ì¡°ì ˆì œ</label>
          <select id="acid">
            <option value="acetic">ë¹™ì´ˆì‚°(ì•„ì„¸íŠ¸ì‚°, ì•¡ìƒ)</option>
            <option value="citric">êµ¬ì—°ì‚°(ë¬´ìˆ˜Â·ë¶„ë§)</option>
          </select>
        </div>

        <div id="aceticBox" class="acid-settings">
          <div class="form-grid">
            <div class="form-group">
              <label for="purity">ë¹™ì´ˆì‚° ìˆœë„ (%)</label>
              <input id="purity" type="number" min="10" max="100" step="0.1" value="99" />
            </div>
            <div class="form-group">
              <label for="density">ë°€ë„ (g/mL)</label>
              <input id="density" type="number" min="0.8" max="1.2" step="0.001" value="1.049" />
            </div>
          </div>
          <div class="hint">ê¸°ë³¸ê°’: 99%, 1.049 g/mL (20â„ƒ)</div>
        </div>

        <div id="citricInfo" class="acid-settings citric" style="display: none;">
          <p><strong>ğŸ’¡ êµ¬ì—°ì‚° ì •ë³´:</strong> êµ¬ì—°ì‚°ì€ ì‚¼ì—¼ê¸°ì„± ì‚°ìœ¼ë¡œ ê³„ì‚°ìƒ <strong>Hâº 3ê°œ ì œê³µ</strong>ìœ¼ë¡œ í™˜ì‚°(ë³´ìˆ˜ì )í•©ë‹ˆë‹¤.</p>
        </div>

        <div class="button-group">
          <button class="btn btn-primary" onclick="calc()">ğŸ§® ê³„ì‚°í•˜ê¸°</button>
          <button class="btn btn-secondary" onclick="resetForm()">ğŸ”„ ì…ë ¥ ì´ˆê¸°í™”</button>
        </div>
      </div>

      <!-- ê¶Œì¥ pH ê°€ì´ë“œ -->
      <div class="card guide-section" style="min-width: 450px;">
        <h2>ğŸ“‹ ê¶Œì¥ pH ê°€ì´ë“œ</h2>
        
        <div class="guide-item">
          <h4>ğŸ¦  ì‚´ê· ì œ</h4>
          <ul>
            <li>ìœ ê¸°ê³„: pH 5.0~6.5</li>
            <li>êµ¬ë¦¬ì œì œ: pH 7.0~8.0</li>
          </ul>
        </div>
        
        <div class="guide-item">
          <h4>ğŸ› ì‚´ì¶©ì œ</h4>
          <ul>
            <li>ìœ ê¸°ì¸ê³„/ì¹´ë°”ë©”ì´íŠ¸: pH 5.0~6.0 (ì•Œì¹¼ë¦¬ ë¶„í•´ ì£¼ì˜)</li>
            <li>í”¼ë ˆìŠ¤ë¡œì´ë“œê³„: pH 5.5~6.5</li>
          </ul>
        </div>
        
        <div class="guide-item">
          <h4>ğŸŒ¿ ì œì´ˆì œ</h4>
          <ul>
            <li>ê¸€ë¦¬í¬ì„¸ì´íŠ¸: pH 4.5~5.5 (ì‚°ì„±ì—ì„œ ìœ ë¦¬)</li>
            <li>ë‹¤ìˆ˜ ì•½ì œ: pH 5.5~6.5 ê¶Œì¥</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- ê²°ê³¼ ì„¹ì…˜ -->
    <div class="card result-section">
      <h2>ğŸ“Š ê³„ì‚° ê²°ê³¼</h2>
      <div id="result" class="result-display">ê³„ì‚° ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ í•„ìš”í•œ ì‚°ì˜ ì–‘ì„ ê³„ì‚°í•˜ì„¸ìš”.</div>
      
      <div class="button-group">
        <button class="btn btn-success" onclick="copyResult()">ğŸ“‹ ê²°ê³¼ ë³µì‚¬</button>
        <button class="btn btn-secondary" onclick="saveAsTxt()">ğŸ’¾ TXTë¡œ ì €ì¥</button>
      </div>
      

    </div>

    <!-- í˜¼í•© íŒ ì„¹ì…˜ -->
    <div class="card tips-section">
      <h2>ğŸ’¡ í˜¼í•© ê°€ì´ë“œ & í˜„ì¥ íŒ</h2>
      
      <div class="tips-grid">
        <div class="tip-item">
          <h4>ğŸ”¬ í˜¼í•© ìˆœì„œ</h4>
          <ul>
            <li>íƒ±í¬ì— ë¬¼ 70% ì±„ì›€</li>
            <li>ì‚°ë„ ì¡°ì ˆì œë¡œ pH ë§ì¶¤</li>
            <li>ë†ì•½ íˆ¬ì…(ë¼ë²¨ ìˆœì„œ ì¤€ìˆ˜)</li>
            <li>ìµœì¢… ë³´ì •</li>
          </ul>
        </div>
        
        <div class="tip-item">
          <h4>âš—ï¸ í™”í•™ì  ì£¼ì˜ì‚¬í•­</h4>
          <ul>
            <li>ê²½ë„ ì´ì˜¨(CaÂ²âº/MgÂ²âº) ë§ìœ¼ë©´ ê¸€ë¦¬í¬ì„¸ì´íŠ¸ ë“± ì•½íš¨ ì €í•˜</li>
            <li>í•„ìš” ì‹œ AMS/í‚¬ë ˆì´íŠ¸ ì‚¬ìš©</li>
            <li>êµ¬ë¦¬ì œì œëŠ” ê³¼ì‚°ì„±ì—ì„œ ì•½í•´ ê°€ëŠ¥ (pH 7~8 ìœ ì§€)</li>
          </ul>
        </div>
        
        <div class="tip-item">
          <h4>ğŸŒ¡ï¸ í˜„ì¥ ê´€ë¦¬</h4>
          <ul>
            <li>í˜¼ìš©ì€ ì œí’ˆ ë¼ë²¨ ìš°ì„ </li>
            <li>ì¹¨ì „Â·ì¸µë¶„ë¦¬Â·ë°œì—´Â·ê±°í’ˆ ì—¬ë¶€ë¥¼ ì†ŒëŸ‰ í…ŒìŠ¤íŠ¸ë¡œ í™•ì¸</li>
            <li>ì‚´í¬ ì§ì „ í˜¼í•©, ì¥ì‹œê°„ ë³´ê´€ ê¸ˆì§€</li>
            <li>ì˜¨ë„ 20-25â„ƒì—ì„œ ìµœì  íš¨ê³¼</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ìƒìˆ˜ë“¤
    const KA_ACETIC = 1.8e-5;
    const PKA = -Math.log10(KA_ACETIC);
    const MW_ACETIC = 60.052;
    const MW_CITRIC = 192.124;
    const ALK_END_PH = 4.5;

    // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
    function clamp(x, a, b) { 
      return Math.max(a, Math.min(b, x)); 
    }
    
    function fmt(x, d = 4) { 
      return (isFinite(x) ? Number(x).toFixed(d) : ''); 
    }
    
    function nowStr() { 
      const t = new Date(); 
      const p = n => String(n).padStart(2, '0'); 
      return `${t.getFullYear()}-${p(t.getMonth() + 1)}-${p(t.getDate())} ${p(t.getHours())}:${p(t.getMinutes())}`; 
    }

    // UI ë‹¤ì´ë‚˜ë¯¹ìŠ¤: ì‚°ë„ ì¡°ì ˆì œ ë³€ê²½
    document.getElementById('acid').addEventListener('change', () => {
      const ac = document.getElementById('acid').value;
      const aceticBox = document.getElementById('aceticBox');
      const citricInfo = document.getElementById('citricInfo');
      
      if (ac === 'acetic') {
        aceticBox.style.display = 'block';
        citricInfo.style.display = 'none';
      } else {
        aceticBox.style.display = 'none';
        citricInfo.style.display = 'block';
      }
    });

    function resetForm() {
      document.getElementById('vol').value = 100;
      document.getElementById('alk').value = 100;
      document.getElementById('ph0').value = 8.0;
      document.getElementById('pht').value = 6.0;
      document.getElementById('acid').value = 'acetic';
      document.getElementById('purity').value = 99;
      document.getElementById('density').value = 1.049;
      document.getElementById('aceticBox').style.display = 'block';
      document.getElementById('citricInfo').style.display = 'none';
      document.getElementById('result').textContent = 'ê³„ì‚° ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ í•„ìš”í•œ ì‚°ì˜ ì–‘ì„ ê³„ì‚°í•˜ì„¸ìš”.';
    }

    function calc() {
      const V = parseFloat(document.getElementById('vol').value || '0');
      const alk_mgL = parseFloat(document.getElementById('alk').value || '0');
      const pH0 = parseFloat(document.getElementById('ph0').value || '0');
      const pHt = parseFloat(document.getElementById('pht').value || '0');
      const acid = document.getElementById('acid').value;
      const purity = parseFloat(document.getElementById('purity').value || '99');
      const density = parseFloat(document.getElementById('density').value || '1.049');
      
      const out = document.getElementById('result');

      // ì…ë ¥ê°’ ê²€ì¦
      if (!(V > 0)) {
        out.textContent = 'âŒ ë¬¼ì˜ ë¶€í”¼ë¥¼ ì…ë ¥í•˜ì„¸ìš”.';
        return;
      }
      if (!(pH0 >= 0 && pH0 <= 14 && pHt >= 0 && pHt <= 14)) {
        out.textContent = 'âŒ pHëŠ” 0~14 ë²”ìœ„ì—¬ì•¼ í•©ë‹ˆë‹¤.';
        return;
      }
      if (!(purity > 0 && density > 0)) {
        out.textContent = 'âŒ ìˆœë„/ë°€ë„ë¥¼ í™•ì¸í•˜ì„¸ìš”.';
        return;
      }

      // ê³„ì‚°
      const oh_molar = (pH0 > 7) ? Math.pow(10, -(14 - pH0)) : 0.0;
      const n_oh = oh_molar * V;
      const n_alk = V * (alk_mgL / 50000.0);

      let f;
      if (pH0 === ALK_END_PH) {
        f = (pHt <= pH0) ? 1.0 : 0.0;
      } else {
        f = clamp((pH0 - pHt) / (pH0 - ALK_END_PH), 0, 1);
      }

      const r = Math.pow(10, (pHt - PKA));

      let n_acid;
      if (pH0 <= pHt) {
        n_acid = n_alk * f;
      } else {
        n_acid = n_oh * (1 + Math.pow(10, -(pHt - PKA))) + n_alk * f;
      }

      let line1 = '';
      let line2 = '';
      
      if (acid === 'acetic') {
        const Cstock = (purity / 100.0 * density * 1000.0) / MW_ACETIC;
        const vol_mL = (n_acid / Cstock) * 1000.0;
        line1 = `ğŸ§ª í•„ìš” ë¹™ì´ˆì‚°: ${fmt(vol_mL, 2)} mL`;
        line2 = `ìš©ì•¡ ë†ë„: ${fmt(Cstock, 3)} mol/L`;
      } else {
        const grams = (n_acid / 3.0) * MW_CITRIC;
        line1 = `ğŸ§ª í•„ìš” êµ¬ì—°ì‚°(ë¶„ë§): ${fmt(grams, 2)} g`;
        line2 = 'ì‚¼ì—¼ê¸°ì„±ìœ¼ë¡œ í™˜ì‚°(3 ë‹¹ëŸ‰ ì‚° ì œê³µ ê°€ì •)';
      }

      const ph_est = (n_acid > 0) ? (PKA + Math.log10(r)) : ((pH0 <= pHt) ? pH0 : pHt);

      const result = `
ğŸ§ª í•„ìš” ${line1.replace('ğŸ§ª í•„ìš” ', '')}
ğŸ“ˆ í˜¼í•© í›„ ì˜ˆìƒ pH: ${fmt(ph_est, 2)}

â„¹ï¸  ${line2}

ğŸ“‹ ì…ë ¥ ì¡°ê±´:
â€¢ ë¬¼ì˜ ë¶€í”¼: ${V} L
â€¢ ì´ˆê¸° pH: ${pH0} â†’ ëª©í‘œ pH: ${pHt}
â€¢ ì•Œì¹¼ë¦¬ë„: ${alk_mgL} mg/L as CaCOâ‚ƒ

ğŸ”¬ ê³„ì‚° ì„¸ë¶€ì‚¬í•­:
â€¢ ì´ˆê¸° [OHâ»]: ${fmt(oh_molar, 6)} mol/L
â€¢ OHâ» ì´ ëª°ìˆ˜: ${fmt(n_oh, 6)} mol  
â€¢ ì•Œì¹¼ë¦¬ë„ ë‹¹ëŸ‰: ${fmt(n_alk, 6)} mol
â€¢ ì¤‘í™” ë¶„ìœ¨: ${fmt(f, 3)}
â€¢ í•„ìš” ì‚° ì´ëŸ‰: ${fmt(n_acid, 6)} mol

âš ï¸ ì¤‘ìš” ì£¼ì˜ì‚¬í•­:
ë°˜ë“œì‹œ 10L ì†ŒëŸ‰ í…ŒìŠ¤íŠ¸ë¡œ í™•ì¸ í›„ ë¹„ë¡€ í™•ëŒ€í•˜ì„¸ìš”!

ğŸ”¬ í˜¼í•© ê°€ì´ë“œ:
1ï¸âƒ£ íƒ±í¬ì— ë¬¼ 70% ì±„ì›€
2ï¸âƒ£ ì‚°ë„ì¡°ì ˆì œ íˆ¬ì… ë° pH ì¡°ì •  
3ï¸âƒ£ ë†ì•½ íˆ¬ì… (ì œí’ˆ ë¼ë²¨ ìˆœì„œ ì¤€ìˆ˜)
4ï¸âƒ£ ìµœì¢… pH ë³´ì • ë° í™•ì¸

ğŸ’¡ í˜„ì¥ íŒ:
â€¢ êµ¬ë¦¬ì œì œ: ê³¼ì‚°ì„± í”¼í•´ (pH 7~8 ìœ ì§€)
â€¢ ê²½ë„ ë†’ì€ ë¬¼: í‚¬ë ˆì´íŠ¸ì œ(AMS) ê³ ë ¤
â€¢ ì‚´í¬ ì§ì „ í˜¼í•©, ì¥ì‹œê°„ ë³´ê´€ ê¸ˆì§€
`;

      out.textContent = result;
      
      // pHì— ë”°ë¥¸ ìƒ‰ìƒ ë³€ê²½
      if (ph_est < 4.0) {
        out.style.background = '#fef2f2';
        out.style.borderColor = '#fca5a5';
      } else if (ph_est > 8.5) {
        out.style.background = '#eff6ff';
        out.style.borderColor = '#93c5fd';
      } else {
        out.style.background = 'white';
        out.style.borderColor = '#e1e8ed';
      }
    }

    function copyResult() {
      const text = document.getElementById('result').textContent;
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(text).then(
          () => alert('âœ… ê²°ê³¼ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.'),
          () => alert('âŒ ë³µì‚¬ ê¶Œí•œì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ ì£¼ì„¸ìš”.')
        );
      } else {
        // Fallback
        const ta = document.createElement('textarea');
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        try {
          document.execCommand('copy');
          alert('âœ… ê²°ê³¼ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.');
        } catch (e) {
          alert('âŒ ë³µì‚¬ ì‹¤íŒ¨. ìˆ˜ë™ ë³µì‚¬í•´ ì£¼ì„¸ìš”.');
        }
        ta.remove();
      }
    }

    function saveAsTxt() {
      const text = document.getElementById('result').textContent;
      const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = `ë†ì•½ì‚´í¬_pH_ê³„ì‚°_ê²°ê³¼_${nowStr().replace(/[:\s]/g, '_')}.txt`;
      document.body.appendChild(a);
      a.click();
      a.remove();
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', function() {
      resetForm();
    });
  </script>
</body>
</html>